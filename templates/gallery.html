{% extends "base.html" %}
{% load static %}

{% block content %}
<h1>Gallery</h1>

<!-- Category Filter Buttons -->
<div class="category-filters">
    <a href="{% url 'gallery' %}?category=general" 
       class="filter-btn {% if selected_category == 'general' %}active{% endif %}">
       General
    </a>
    <a href="{% url 'gallery' %}?category=thanksgiving" 
       class="filter-btn {% if selected_category == 'thanksgiving' %}active{% endif %}">
       Thanksgiving
    </a>
</div>

<div class="gallery-grid">
    {% for img in images %}
        <div class="gallery-item">
            {% if img.image %}
                <img src="{{ img.image.url }}" alt="{{ img.caption }}" class="gallery-image">
            {% elif img.video %}
                <video controls class="gallery-video">
                    <source src="{{ img.video.url }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            {% endif %}

            {% if img.caption %}
                <p class="caption">{{ img.caption }}</p>
            {% endif %}

            {% if user.is_authenticated and user.is_staff %}
                <p><a href="{% url 'delete_image' img.id %}">Delete</a></p>
            {% endif %}
        </div>
    {% empty %}
        <p>No media available in this category.</p>
    {% endfor %}
</div>
{% endblock %}
